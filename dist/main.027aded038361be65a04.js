(()=>{"use strict";var t="bookList",e="not-yet";const o=function(t){var o=t.messageSuccessDelete,n=void 0===o?"":o,i=t.bookTitle,s=void 0===i?"":i,a=t.bookId,c=void 0===a?0:a,r=t.bookList,l=document.createElement("div"),d=document.createElement("div");d.setAttribute("class","wrapper-overlay"),l.setAttribute("class","alert-ask"),l.innerHTML='\n  <img\n      src="./src/images/icons/question.png"\n      alt="question icon"\n      width="30"\n      class="mb-1"\n    />\n    <div class="ask-message mb-1">\n      Apakah anda yakin ingin menghapus data buku berjudul "'.concat(s,'" ini ?\n    </div>\n    <div class="btn-group mb-1">\n      <button class="btn-submit">Ya</button>\n      <button class="btn-danger">Tidak</button>\n    </div>\n  '),l.querySelector(".btn-danger").addEventListener("click",(function(){l.classList.remove("show-alert-ask"),d.classList.remove("show-modal")})),l.querySelector(".btn-submit").addEventListener("click",(function(){r.deleteBookById(c),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=document.createElement("div");o.setAttribute("class","alert-success ".concat("not-yet"===e?"bg-primary":"bg-secondary")),o.innerText=t,document.body.appendChild(o),setTimeout((function(){o.classList.add("show-alert-success")}),0),setTimeout((function(){o.remove()}),2e3)}(n),l.classList.remove("show-alert-ask"),d.classList.remove("show-modal")})),d.appendChild(l),document.body.appendChild(d),setTimeout((function(){l.classList.add("show-alert-ask"),d.classList.add("show-modal")}),0)},n={init:function(t){var e=t.book,o=void 0===e?{}:e,n=t.bookList,i=void 0===n?{}:n;return this.book=o,this.bookList=i,this.render()},render:function(){var t=this.bookList,e=document.createElement("div");e.setAttribute("class","book-item column-12 column-sm-6 column-lg-4 column-xxl-3   ".concat(!1===this.book.isComplete?"shadow-primary":"shadow-secondary")),e.innerHTML='<h2 class="line-clamp '.concat(!1===this.book.isComplete?"text-primary":"text-secondary",'  title" title="').concat(this.book.title,'">\n    ').concat(this.book.title,'\n  </h2>\n\n  <div class="author line-clamp fw-5">').concat(this.book.author,'</div>\n  <div class="year fw-4">').concat(this.book.year,'</div>\n\n  <div class="action">\n  ').concat(!1===this.book.isComplete?'<img src="./src/images/icons/checked.png" alt="checked icon" width="30" class="icon" />':'<img src="./src/images/icons/undo.png" alt="undo icon" width="30" class="icon" />','\n    \n    <img\n      src="./src/images/icons/trash.png"\n      alt="trash"\n      width="30"\n      class="icon"\n    />\n  </div>');var n=this.book.title,i=this.book.id;return e.querySelector("img:last-child").addEventListener("click",(function(){o({messageSuccessDelete:'Buku berjudul "'.concat(n,'" berhasil dihapus!!'),bookTitle:n,bookId:i,bookList:t})})),e.querySelector("img:first-child").addEventListener("click",(function(){t.updateIsCompleteBookById(i),e.remove()})),e}},i=document.querySelector(".input-search");var s={init:function(t){var e=this,o=t.books,n=void 0===o?[]:o,i=t.type,s=void 0===i?"not-yet":i,a=t.container;this.books=n,this.type="not-yet"!==s,this.container=a,this.render(n.filter((function(t){return t.isComplete===e.type})))},add:function(e){var o=this;this.books.unshift(e),localStorage.setItem(t,JSON.stringify(this.books)),i.value="",this.render(this.books.filter((function(t){return t.isComplete===o.type})))},deleteBookById:function(e){var o=this;this.books=this.books.filter((function(t){return t.id!==e})),localStorage.setItem(t,JSON.stringify(this.books)),this.render(this.books.filter((function(t){return t.isComplete===o.type})))},updateIsCompleteBookById:function(e){this.books=this.books.map((function(t){return t.id===e&&(t.isComplete=!t.isComplete),t})),localStorage.setItem(t,JSON.stringify(this.books))},setType:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not-yet";this.type="not-yet"!==e,this.render(this.books.filter((function(e){return e.isComplete===t.type})))},search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.render(this.books.filter((function(o){return!(!o.title.toLowerCase().includes(e.toLowerCase())||o.isComplete!==t.type)&&o})))},render:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.container.innerHTML="",0!==e.length&&e?e.forEach((function(e){t.container.appendChild(n.init({book:e,bookList:t}))})):this.container.innerHTML='<div class="column-12 text-center">Data Buku Tidak Ditemukan</div>'}};const a=s;function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var r=document.getElementById("not-yet"),l=document.getElementById("done"),d=document.querySelector("#not-yet a"),u=document.querySelector("#done a"),m=document.querySelector(".btn-add"),h=document.querySelector(".close"),b=document.querySelector(".wrapper-overlay"),v=document.querySelector(".book-list"),y=document.querySelector(".title-page");if(void 0!==("undefined"==typeof Storage?"undefined":c(Storage)))if(localStorage.getItem(t)){var k=JSON.parse(localStorage.getItem(t));a.init({books:k,type:"not-yet",container:v})}else localStorage.setItem(t,JSON.stringify([])),a.init({books:[],type:"not-yet",container:v});else alert("your browser is not support web storage, this app will not run!!");i.addEventListener("keyup",(function(t){a.search(t.target.value)}));var p=function(t){e=t};m.addEventListener("click",(function(){b.classList.add("show-modal")})),h.addEventListener("click",(function(){b.classList.remove("show-modal")})),d.addEventListener("click",(function(){f({tabActive:"not-yet",tabActiveElem:r,anotherTabElem:l,inputSearchElem:i})})),u.addEventListener("click",(function(){f({tabActive:"done",tabActiveElem:l,anotherTabElem:r,inputSearchElem:i})}));var f=function(t){var e=t.tabActive,o=void 0===e?"not-yet":e,n=t.tabActiveElem,i=t.anotherTabElem,s=t.inputSearchElem;p(o),n.classList.add("active"),i.classList.remove("active"),s.value="",a.setType(o),"done"===o?g("Daftar Buku Yang Sudah Selesai Dibaca","text-secondary"):"not-yet"===o&&g("Daftar Buku Yang Belum Selesai Dibaca","text-primary")},g=function(t,e){y.innerText=t,y.setAttribute("class","title-page ".concat(e))};m.addEventListener("click",(function(){b.classList.add("show-modal")}));var S=document.getElementById("judul"),L=document.getElementById("penulis"),E=document.getElementById("tahun"),w=document.getElementById("isComplete");document.getElementById("form-add-book").addEventListener("submit",(function(t){t.preventDefault();var e=S.value,o=L.value,n=E.value,i=w.checked;console.log(c(i));var s={id:+new Date,title:e,author:o,year:n,isComplete:i};a.add(s),alert("Buku baru berhasil di tambahkan"),S.value="",L.value="",E.value=2016,w.checked=!1}))})();