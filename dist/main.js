(()=>{"use strict";const e="bookList";let t="not-yet";const s=({messageSuccessDelete:e="",bookTitle:s="",bookId:o=0,bookList:i})=>{const n=document.createElement("div"),a=document.createElement("div");a.setAttribute("class","wrapper-overlay"),n.setAttribute("class","alert-ask"),n.innerHTML=`\n  <img\n      src="./src/images/icons/question.png"\n      alt="question icon"\n      width="30"\n      class="mb-1"\n    />\n    <div class="ask-message mb-1">\n      Apakah anda yakin ingin menghapus data buku berjudul "${s}" ini ?\n    </div>\n    <div class="btn-group mb-1">\n      <button class="btn-submit">Ya</button>\n      <button class="btn-danger">Tidak</button>\n    </div>\n  `,n.querySelector(".btn-danger").addEventListener("click",(()=>{n.classList.remove("show-alert-ask"),a.classList.remove("show-modal")})),n.querySelector(".btn-submit").addEventListener("click",(()=>{i.deleteBookById(o),((e="")=>{const s=document.createElement("div");s.setAttribute("class","alert-success "+("not-yet"===t?"bg-primary":"bg-secondary")),s.innerText=e,document.body.appendChild(s),setTimeout((()=>{s.classList.add("show-alert-success")}),0),setTimeout((()=>{s.remove()}),2e3)})(e),n.classList.remove("show-alert-ask"),a.classList.remove("show-modal")})),a.appendChild(n),document.body.appendChild(a),setTimeout((()=>{n.classList.add("show-alert-ask"),a.classList.add("show-modal")}),0)},o={init({book:e={},bookList:t={}}){return this.book=e,this.bookList=t,this.render()},render(){const e=this.bookList,t=document.createElement("div");t.setAttribute("class","book-item column-12 column-sm-6 column-lg-4 column-xxl-3   "+(!1===this.book.isComplete?"shadow-primary":"shadow-secondary")),t.innerHTML=`<h2 class="line-clamp ${!1===this.book.isComplete?"text-primary":"text-secondary"}  title" title="${this.book.title}">\n    ${this.book.title}\n  </h2>\n\n  <div class="author line-clamp fw-5">${this.book.author}</div>\n  <div class="year fw-4">${this.book.year}</div>\n\n  <div class="action">\n  ${!1===this.book.isComplete?'<img src="./src/images/icons/checked.png" alt="checked icon" width="30" class="icon" />':'<img src="./src/images/icons/undo.png" alt="undo icon" width="30" class="icon" />'}\n    \n    <img\n      src="./src/images/icons/trash.png"\n      alt="trash"\n      width="30"\n      class="icon"\n    />\n  </div>`;const o=this.book.title,i=this.book.id;return t.querySelector("img:last-child").addEventListener("click",(()=>{s({messageSuccessDelete:`Buku berjudul "${o}" berhasil dihapus!!`,bookTitle:o,bookId:i,bookList:e})})),t.querySelector("img:first-child").addEventListener("click",(()=>{e.updateIsCompleteBookById(i),t.remove()})),t}},i=document.querySelector(".input-search"),n={init({books:e=[],type:t="not-yet",container:s}){this.books=e,this.type="not-yet"!==t,this.container=s,this.render(e.filter((e=>e.isComplete===this.type)))},add(t){this.books.unshift(t),localStorage.setItem(e,JSON.stringify(this.books)),i.value="",this.render(this.books.filter((e=>e.isComplete===this.type)))},deleteBookById(t){this.books=this.books.filter((e=>e.id!==t)),localStorage.setItem(e,JSON.stringify(this.books)),this.render(this.books.filter((e=>e.isComplete===this.type)))},updateIsCompleteBookById(t){this.books=this.books.map((e=>(e.id===t&&(e.isComplete=!e.isComplete),e))),localStorage.setItem(e,JSON.stringify(this.books))},setType(e="not-yet"){this.type="not-yet"!==e,this.render(this.books.filter((e=>e.isComplete===this.type)))},search(e=""){this.render(this.books.filter((t=>!(!t.title.toLowerCase().includes(e.toLowerCase())||t.isComplete!==this.type)&&t)))},render(e=[]){this.container.innerHTML="",0!==e.length&&e?e.forEach((e=>{this.container.appendChild(o.init({book:e,bookList:this}))})):this.container.innerHTML='<div class="column-12 text-center">Data Buku Tidak Ditemukan</div>'}},a=document.getElementById("not-yet"),l=document.getElementById("done"),c=document.querySelector("#not-yet a"),r=document.querySelector("#done a"),d=document.querySelector(".btn-add"),u=document.querySelector(".close"),m=document.querySelector(".wrapper-overlay"),h=document.querySelector(".book-list"),b=document.querySelector(".title-page");if(void 0!==typeof Storage)if(localStorage.getItem(e)){const t=JSON.parse(localStorage.getItem(e));n.init({books:t,type:"not-yet",container:h})}else localStorage.setItem(e,JSON.stringify([])),n.init({books:[],type:"not-yet",container:h});else alert("your browser is not support web storage, this app will not run!!");i.addEventListener("keyup",(e=>{n.search(e.target.value)}));const k=e=>{t=e};d.addEventListener("click",(()=>{m.classList.add("show-modal")})),u.addEventListener("click",(()=>{m.classList.remove("show-modal")})),c.addEventListener("click",(function(){y({tabActive:"not-yet",tabActiveElem:a,anotherTabElem:l,inputSearchElem:i})})),r.addEventListener("click",(function(){y({tabActive:"done",tabActiveElem:l,anotherTabElem:a,inputSearchElem:i})}));const y=({tabActive:e="not-yet",tabActiveElem:t,anotherTabElem:s,inputSearchElem:o})=>{k(e),t.classList.add("active"),s.classList.remove("active"),o.value="",n.setType(e),"done"===e?p("Daftar Buku Yang Sudah Selesai Dibaca","text-secondary"):"not-yet"===e&&p("Daftar Buku Yang Belum Selesai Dibaca","text-primary")},p=(e,t)=>{b.innerText=e,b.setAttribute("class",`title-page ${t}`)};d.addEventListener("click",(()=>{m.classList.add("show-modal")}));const v=document.getElementById("judul"),g=document.getElementById("penulis"),L=document.getElementById("tahun"),E=document.getElementById("isComplete");document.getElementById("form-add-book").addEventListener("submit",(function(e){e.preventDefault();const t=v.value,s=g.value,o=L.value,i=E.checked;console.log(typeof i);const a={id:+new Date,title:t,author:s,year:o,isComplete:i};n.add(a),alert("Buku baru berhasil di tambahkan"),v.value="",g.value="",L.value=2016,E.checked=!1}))})();